!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=70)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e){!function(){t.exports=this.wc.wcSettings}()},function(t,e){!function(){t.exports=this.React}()},function(t,e,r){"use strict";var n=r(3),o=Object(n.getSetting)("enableReviewRating",!0),c=Object(n.getSetting)("showAvatars",!0),i=(Object(n.getSetting)("max_columns",6),Object(n.getSetting)("min_columns",1),Object(n.getSetting)("default_columns",3),Object(n.getSetting)("max_rows",6),Object(n.getSetting)("min_rows",1),Object(n.getSetting)("default_rows",2),Object(n.getSetting)("min_height",500),Object(n.getSetting)("default_height",500),Object(n.getSetting)("placeholderImgSrc","")),a=(Object(n.getSetting)("thumbnail_size",300),Object(n.getSetting)("isLargeCatalog")),u=Object(n.getSetting)("limitTags"),s=(Object(n.getSetting)("hasProducts",!0),Object(n.getSetting)("hasTags",!0),Object(n.getSetting)("homeUrl",""),Object(n.getSetting)("productCount",0),Object(n.getSetting)("attributes",[])),l=Object(n.getSetting)("wcBlocksAssetUrl",""),p={root:"/wc/blocks",products:"".concat("/wc/blocks","/products"),categories:"".concat("/wc/blocks","/products/categories")};r.d(e,"b",(function(){return o})),r.d(e,"g",(function(){return c})),r.d(e,"f",(function(){return i})),r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return s})),r.d(e,"h",(function(){return l})),r.d(e,"c",(function(){return p}))},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){!function(){t.exports=this.regeneratorRuntime}()},function(t,e){function r(){return t.exports=r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r.apply(this,arguments)}t.exports=r},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,r){var n=r(25),o=r(6);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(34);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){var n=r(38),o=r(39),c=r(40);t.exports=function(t,e){return n(t)||o(t,e)||c()}},function(t,e){!function(){t.exports=this.lodash}()},function(t,e,r){t.exports=r(35)()},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(7),o=r.n(n),c=function(t){var e;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("function"!=typeof t.json){r.next=11;break}return r.prev=1,r.next=4,o.a.awrap(t.json());case 4:return e=r.sent,r.abrupt("return",{message:e.message,type:e.type||"api"});case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",{message:r.t0.message,type:"general"});case 11:return r.abrupt("return",{message:t.message,type:t.type||"general"});case 12:case"end":return r.stop()}}),null,null,[[1,8]])}},function(t,e){!function(){t.exports=this.wp.compose}()},function(t,e){!function(){t.exports=this.wc.wcBlocksData}()},function(t,e){!function(){t.exports=this.wp.data}()},function(t,e,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var c=typeof n;if("string"===c||"number"===c)t.push(n);else if(Array.isArray(n)&&n.length){var i=o.apply(null,n);i&&t.push(i)}else if("object"===c)for(var a in n)r.call(n,a)&&n[a]&&t.push(a)}}return t.join(" ")}t.exports?(o.default=o,t.exports=o):void 0===(n=function(){return o}.apply(e,[]))||(t.exports=n)}()},function(t,e){!function(){t.exports=this.wp.apiFetch}()},function(t,e){!function(){t.exports=this.wp.url}()},function(t,e,r){"use strict";var n=r(1),o=r.n(n),c=r(14),i=r.n(c),a=r(19),u=r(20),s=r(0),l=Object(s.createContext)("page"),p=function(){return Object(s.useContext)(l)},f=(l.Provider,r(26)),d=r.n(f),b=function(t){var e=Object(s.useRef)();return d()(t,e.current)||(e.current=t),e.current};function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var h=function(t){var e=p();t=t||e;var r=Object(u.useSelect)((function(e){return e(a.QUERY_STATE_STORE_KEY).getValueForQueryContext(t,void 0)}),[t]),n=Object(u.useDispatch)(a.QUERY_STATE_STORE_KEY).setValueForQueryContext;return[r,Object(s.useCallback)((function(e){n(t,e)}),[t])]},v=function(t,e,r){var n=p();r=r||n;var o=Object(u.useSelect)((function(n){return n(a.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,t,e)}),[r,t]),c=Object(u.useDispatch)(a.QUERY_STATE_STORE_KEY).setQueryValue;return[o,Object(s.useCallback)((function(e){c(r,t,e)}),[r,t])]},y=function(t,e){var r=p(),n=h(e=e||r),c=i()(n,2),a=c[0],u=c[1],l=b(t),f=Object(s.useRef)(!1);return Object(s.useEffect)((function(){u(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},a,{},l)),f.current=!0}),[l]),f.current?[a,u]:[t,u]},O=function(t){var e=t.namespace,r=t.resourceName,n=t.resourceValues,o=void 0===n?[]:n,c=t.query,i=void 0===c?{}:c,l=t.shouldSelect,p=void 0===l||l;if(!e||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");var f=Object(s.useRef)({results:[],isLoading:!0}),d=b(i),g=b(o),h=Object(u.useSelect)((function(t){if(!p)return null;var n=t(a.COLLECTIONS_STORE_KEY),o=[e,r,d,g];return{results:n.getCollection.apply(n,o),isLoading:!n.hasFinishedResolution("getCollection",o)}}),[e,r,g,d,p]);return null!==h&&(f.current=h),f.current};function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var w=function(t){var e={namespace:"/wc/store",resourceName:"products"},r=O(j({},e,{query:t})),n=r.results,o=r.isLoading;return{products:n,totalProducts:function(t,e){var r=e.namespace,n=e.resourceName,o=e.resourceValues,c=void 0===o?[]:o,i=e.query,s=void 0===i?{}:i;if(!r||!n)throw new Error("The options object must have valid values for the namespace and the resource name properties.");var l=b(s),p=b(c),f=Object(u.useSelect)((function(e){var o=e(a.COLLECTIONS_STORE_KEY),c=[t,r,n,l,p];return{value:o.getCollectionHeader.apply(o,c),isLoading:o.hasFinishedResolution("getCollectionHeader",c)}}),[t,r,n,p,l]),d=f.value,g=f.isLoading;return{value:d,isLoading:void 0===g||g}}("x-wp-total",j({},e,{query:t})).value,productsLoading:o}},S=r(29),_=r.n(S),E=r(25),x=r.n(E),P=r(4),k=r(31);function R(t,e){return t===e}var C=r(15);function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var L=function(t){var e=t.queryAttribute,r=t.queryPrices,n=t.queryState,o=p();o="".concat(o,"-collection-data");var c=h(o),a=i()(c,1)[0],u=v("calculate_attribute_counts",[],o),l=i()(u,2),f=l[0],d=l[1],g=v("calculate_price_range",null,o),y=i()(g,2),m=y[0],j=y[1],w=b(e||{}),S=b(r);Object(s.useEffect)((function(){"object"===x()(w)&&Object.keys(w).length&&(f.find((function(t){return t.taxonomy===w.taxonomy}))||d([].concat(_()(f),[w])))}),[w,f,d]),Object(s.useEffect)((function(){m!==S&&void 0!==S&&j(S)}),[S,j,m]);var E,A,L,D,N,I,M,F,q,U,V,Y=Object(s.useState)(!1),Q=i()(Y,2),H=Q[0],B=Q[1],K=(E=H,A=200,D=L&&L.equalityFn?L.equalityFn:R,N=Object(P.useState)(E),I=N[0],M=N[1],F=Object(k.a)(Object(P.useCallback)((function(t){return M(t)}),[]),A,L),q=F[0],U=F[1],V=Object(P.useRef)(E),Object(P.useEffect)((function(){D(V.current,E)||(q(E),V.current=E)}),[E,q,D]),[I,U]),W=i()(K,1)[0];H||B(!0);var z=Object(s.useMemo)((function(){return function(t){var e=t;return t.calculate_attribute_counts&&(e.calculate_attribute_counts=Object(C.sortBy)(t.calculate_attribute_counts.map((function(t){return{taxonomy:t.taxonomy,query_type:t.queryType}})),["taxonomy","query_type"])),e}(a)}),[a]);return O({namespace:"/wc/store",resourceName:"products/collection-data",query:T({},n,{page:void 0,per_page:void 0,orderby:void 0,order:void 0},z),shouldSelect:W})},D=function(t,e){var r=Object(P.useRef)();return Object(P.useEffect)((function(){r.current===t||e&&!e(t,r.current)||(r.current=t)}),[t,r.current]),r.current};r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return v})),r.d(e,"g",(function(){return y})),r.d(e,"f",(function(){return w})),r.d(e,"a",(function(){return O})),r.d(e,"b",(function(){return L})),r.d(e,"c",(function(){return D}))},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e){!function(){t.exports=this.wp.isShallowEqual}()},function(t,e){!function(){t.exports=this.ReactDOM}()},function(t,e,r){"use strict";var n=r(8),o=r.n(n),c=r(1),i=r.n(c),a=r(27),u=r(9),s=r.n(u),l=r(10),p=r.n(l),f=r(11),d=r.n(f),b=r(12),g=r.n(b),h=r(6),v=r.n(h),y=r(13),O=r.n(y),m=r(4),j=(r(16),r(2)),w=r(5),S=function(t){var e=t.imageUrl,r=void 0===e?"".concat(w.h,"img/block-error.svg"):e,n=t.header,o=void 0===n?Object(j.__)("Oops!","woo-gutenberg-products-block"):n,c=t.text,i=void 0===c?Object(j.__)("There was an error with loading this content.","woo-gutenberg-products-block"):c,a=t.errorMessage;return React.createElement("div",{className:"wc-block-error"},r&&React.createElement("img",{className:"wc-block-error__image",src:r,alt:""}),React.createElement("div",{className:"wc-block-error__content"},o&&React.createElement("p",{className:"wc-block-error__header"},o),i&&React.createElement("p",{className:"wc-block-error__text"},i),a&&React.createElement("p",{className:"wc-block-error__message"},a)))},_=(r(37),function(t){function e(){var t,r;s()(this,e);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return r=d()(this,(t=g()(e)).call.apply(t,[this].concat(o))),i()(v()(r),"state",{hasError:!1}),r}return O()(e,t),p()(e,[{key:"render",value:function(){var t=this.props,e=t.header,r=t.imageUrl,n=t.showErrorMessage,o=t.text,c=this.state,i=c.errorMessage;return c.hasError?React.createElement(S,{errorMessage:n?i:null,header:e,imageUrl:r,text:o}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{errorMessage:t.message,hasError:!0}}}]),e}(m.Component));_.defaultProps={showErrorMessage:!1};var E=_;function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=document.querySelectorAll(t);n.length&&Array.prototype.forEach.call(n,(function(t,n){var c=r(t,n),i=P({},t.dataset,{},c.attributes);t.classList.remove("is-loading"),Object(a.render)(React.createElement(E,null,React.createElement(e,o()({},c,{attributes:i}))),t)}))}},function(t,e,r){var n=r(41),o=r(42),c=r(43);t.exports=function(t){return n(t)||o(t)||c()}},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r(2),o=r(3),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CURRENCY.price_format,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.CURRENCY.symbol;if(""===t||void 0===t)return"";var c=parseInt(t,10),i=Object(n.sprintf)(e,r,c),a=document.createElement("textarea");return a.innerHTML=i,a.value}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(4);function o(t,e,r){void 0===r&&(r={});var o=r.maxWait,c=Object(n.useRef)(null),i=Object(n.useRef)([]),a=r.leading,u=Object(n.useRef)(!1),s=Object(n.useRef)(null),l=Object(n.useRef)(!1),p=Object(n.useRef)(t);p.current=t;var f=Object(n.useCallback)((function(){clearTimeout(s.current),clearTimeout(c.current),c.current=null,i.current=[],s.current=null,u.current=!1}),[]);Object(n.useEffect)((function(){return function(){l.current=!0}}),[]);return[Object(n.useCallback)((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(i.current=t,clearTimeout(s.current),!s.current&&a&&!u.current)return p.current.apply(p,t),void(u.current=!0);s.current=setTimeout((function(){f(),l.current||p.current.apply(p,t)}),e),o&&!c.current&&(c.current=setTimeout((function(){var t=i.current;f(),l.current||p.current.apply(null,t)}),o))}),[o,e,f,a]),f,function(){s.current&&(p.current.apply(null,i.current),f())}]}},function(t,e,r){"use strict";var n=r(8),o=r.n(n),c=r(7),i=r.n(c),a=r(1),u=r.n(a),s=r(9),l=r.n(s),p=r(10),f=r.n(p),d=r(11),b=r.n(d),g=r(12),h=r.n(g),v=r(6),y=r.n(v),O=r(13),m=r.n(O),j=r(0),w=r(18),S=(r(16),r(15)),_=r(23),E=r(22),x=r.n(E),P=r(5);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C=function(t){var e=t.selected,r=void 0===e?[]:e,n=t.search,o=void 0===n?"":n,c=t.queryArgs,i=function(t){var e=t.selected,r=void 0===e?[]:e,n=t.search,o=void 0===n?"":n,c=t.queryArgs,i=void 0===c?[]:c,a={per_page:P.d?100:-1,catalog_visibility:"any",status:"publish",search:o,orderby:"title",order:"asc"},u=[Object(_.addQueryArgs)(P.c.products,R({},a,{},i))];return P.d&&r.length&&u.push(Object(_.addQueryArgs)(P.c.products,{catalog_visibility:"any",status:"publish",include:r})),u}({selected:r,search:o,queryArgs:void 0===c?[]:c});return Promise.all(i.map((function(t){return x()({path:t})}))).then((function(t){return Object(S.uniqBy)(Object(S.flatten)(t),"id").map((function(t){return R({},t,{parent:0})}))})).catch((function(t){throw t}))},A=function(t){return x()({path:"".concat(P.c.products,"/").concat(t)})},T=function(t){return x()({path:Object(_.addQueryArgs)("".concat(P.c.products,"/").concat(t,"/variations"),{per_page:-1})})},L=r(17);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Object(w.createHigherOrderComponent)((function(t){var e=function(e){function r(){var t;return l()(this,r),(t=b()(this,h()(r).apply(this,arguments))).state={attributes:[],error:null,expandedAttribute:null,loading:!1,termsList:{},termsLoading:!1},t.loadAttributes=t.loadAttributes.bind(y()(t)),t.onExpandAttribute=t.onExpandAttribute.bind(y()(t)),t.debouncedLoadTerms=Object(S.debounce)(t.loadTerms.bind(y()(t)),200),t}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){this.loadAttributes()}},{key:"componentWillUnmount",value:function(){this.debouncedLoadTerms.cancel()}},{key:"componentDidUpdate",value:function(t,e){e.expandedAttribute!==this.state.expandedAttribute&&this.debouncedLoadTerms()}},{key:"loadAttributes",value:function(){var t=this,e=this.props.selected,r=this.state.expandedAttribute;this.setState({loading:!0}),x()({path:Object(_.addQueryArgs)("".concat(P.c.products,"/attributes"),{per_page:-1})}).then((function(n){n=n.map((function(t){return N({},t,{parent:0})}));var o=r;if(!r&&e.length>0){var c=n.find((function(t){return t.slug===e[0].attr_slug}));c&&(o=c.id)}t.setState({attributes:n,expandedAttribute:o,loading:!1,error:null})})).catch((function(e){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(e));case 2:r=n.sent,t.setState({attributes:[],expandedAttribute:null,loading:!1,error:r});case 4:case"end":return n.stop()}}))}))}},{key:"loadTerms",value:function(){var t,e=this,r=this.state,n=r.expandedAttribute,o=r.termsList;n&&(o[n]||this.setState({termsLoading:!0}),(t=n,x()({path:Object(_.addQueryArgs)("".concat(P.c.products,"/attributes/").concat(t,"/terms"),{per_page:-1})})).then((function(t){t=t.map((function(t){return N({},t,{parent:n,attr_slug:t.attribute.slug})})),e.setState((function(e){return{termsList:N({},e.termsList,u()({},n,t)),termsLoading:!1}}))})).catch((function(t){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(t));case 2:r=n.sent,e.setState({termsList:{},termsLoading:!1,error:r});case 4:case"end":return n.stop()}}))})))}},{key:"onExpandAttribute",value:function(t){var e=this.state.expandedAttribute;this.setState({expandedAttribute:t===e?null:t})}},{key:"render",value:function(){var e=this.state,r=e.error,n=e.expandedAttribute,c=e.loading,i=e.attributes,a=e.termsList,u=e.termsLoading;return React.createElement(t,o()({},this.props,{attributes:i,error:r,expandedAttribute:n,onExpandAttribute:this.onExpandAttribute,isLoading:c,termsAreLoading:u,termsList:a}))}}]),r}(j.Component);return e.defaultProps={selected:[]},e}),"withAttributes"),Object(w.createHigherOrderComponent)((function(t){return function(e){function r(){var t;return l()(this,r),(t=b()(this,h()(r).apply(this,arguments))).state={error:null,loading:!1,categories:null},t.loadCategories=t.loadCategories.bind(y()(t)),t}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){this.loadCategories()}},{key:"loadCategories",value:function(){var t,e=this;this.setState({loading:!0}),(t={show_review_count:this.props.showReviewCount||!1},x()({path:Object(_.addQueryArgs)("".concat(P.c.products,"/categories"),R({per_page:-1},t))})).then((function(t){e.setState({categories:t,loading:!1,error:null})})).catch((function(t){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(t));case 2:r=n.sent,e.setState({categories:null,loading:!1,error:r});case 4:case"end":return n.stop()}}))}))}},{key:"render",value:function(){var e=this.state,r=e.error,n=e.loading,c=e.categories;return React.createElement(t,o()({},this.props,{error:r,isLoading:n,categories:c}))}}]),r}(j.Component)}),"withCategories"),Object(w.createHigherOrderComponent)((function(t){return function(e){function r(){var t;return l()(this,r),(t=b()(this,h()(r).apply(this,arguments))).state={error:null,loading:!1,category:"preview"===t.props.attributes.categoryId?t.props.attributes.previewCategory:null},t.loadCategory=t.loadCategory.bind(y()(t)),t}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){this.loadCategory()}},{key:"componentDidUpdate",value:function(t){t.attributes.categoryId!==this.props.attributes.categoryId&&this.loadCategory()}},{key:"loadCategory",value:function(){var t=this,e=this.props.attributes.categoryId;"preview"!==e&&(e?(this.setState({loading:!0}),function(t){return x()({path:"".concat(P.c.categories,"/").concat(t)})}(e).then((function(e){t.setState({category:e,loading:!1,error:null})})).catch((function(e){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(e));case 2:r=n.sent,t.setState({category:null,loading:!1,error:r});case 4:case"end":return n.stop()}}))}))):this.setState({category:null,loading:!1,error:null}))}},{key:"render",value:function(){var e=this.state,r=e.error,n=e.loading,c=e.category;return React.createElement(t,o()({},this.props,{error:r,getCategory:this.loadCategory,isLoading:n,category:c}))}}]),r}(j.Component)}),"withCategory"),Object(w.createHigherOrderComponent)((function(t){return function(e){function r(){var t,e;l()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=b()(this,(t=h()(r)).call.apply(t,[this].concat(o))),u()(y()(e),"state",{error:null,loading:!1,product:"preview"===e.props.attributes.productId?e.props.attributes.previewProduct:null}),u()(y()(e),"loadProduct",(function(){var t=e.props.attributes.productId;"preview"!==t&&(t?(e.setState({loading:!0}),A(t).then((function(t){e.setState({product:t,loading:!1,error:null})})).catch((function(t){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(t));case 2:r=n.sent,e.setState({product:null,loading:!1,error:r});case 4:case"end":return n.stop()}}))}))):e.setState({product:null,loading:!1,error:null}))})),e}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){this.loadProduct()}},{key:"componentDidUpdate",value:function(t){t.attributes.productId!==this.props.attributes.productId&&this.loadProduct()}},{key:"render",value:function(){var e=this.state,r=e.error,n=e.loading,c=e.product;return React.createElement(t,o()({},this.props,{error:r,getProduct:this.loadProduct,isLoading:n,product:c}))}}]),r}(j.Component)}),"withProduct");var I=r(26),M=r.n(I);function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Object(w.createHigherOrderComponent)((function(t){var e=function(e){function r(){var t,e;l()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return e=b()(this,(t=h()(r)).call.apply(t,[this].concat(o))),u()(y()(e),"state",{error:null,loading:!1,variations:{}}),u()(y()(e),"loadVariations",(function(){var t=e.props.products,r=e.state,n=r.loading,o=r.variations;if(!n){var c=e.getExpandedProduct();if(c&&!o[c]){var a=t.find((function(t){return t.id===c}));a.variations&&0!==a.variations.length?(e.setState({loading:!0}),T(c).then((function(t){var r=t.map((function(t){return q({},t,{parent:c})}));e.setState({variations:q({},e.state.variations,u()({},c,r)),loading:!1,error:null})})).catch((function(t){var r;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(Object(L.a)(t));case 2:r=n.sent,e.setState({variations:q({},e.state.variations,u()({},c,null)),loading:!1,error:r});case 4:case"end":return n.stop()}}))}))):e.setState({variations:q({},e.state.variations,u()({},c,null)),loading:!1,error:null})}}})),e}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){var t=this.props,e=t.selected,r=t.showVariations;e&&r&&this.loadVariations()}},{key:"componentDidUpdate",value:function(t){var e=this.props,r=e.isLoading,n=e.selected;e.showVariations&&(!M()(t.selected,n)||t.isLoading&&!r)&&this.loadVariations()}},{key:"isProductId",value:function(t){return this.props.products.some((function(e){return e.id===t}))}},{key:"findParentProduct",value:function(t){return this.props.products.filter((function(e){return e.variations&&e.variations.includes(t)}))[0].id}},{key:"getExpandedProduct",value:function(){var t=this.props,e=t.isLoading,r=t.selected;if(!t.showVariations)return null;var n=r&&r.length?r[0]:null;return n?this.prevSelectedItem=n:this.prevSelectedItem&&(e||this.isProductId(this.prevSelectedItem)||(n=this.prevSelectedItem)),!e&&n?this.isProductId(n)?n:this.findParentProduct(n):null}},{key:"render",value:function(){var e=this.props,r=e.error,n=e.isLoading,c=this.state,i=c.error,a=c.loading,u=c.variations;return React.createElement(t,o()({},this.props,{error:i||r,expandedProduct:this.getExpandedProduct(),isLoading:n,variations:u,variationsLoading:a}))}}]),r}(j.Component);return u()(e,"defaultProps",{selected:[],showVariations:!1}),e}),"withProductVariations"),Object(w.createHigherOrderComponent)((function(t){var e=function(e){function r(){var t;return l()(this,r),(t=b()(this,h()(r).apply(this,arguments))).state={list:[],loading:!0},t.setError=t.setError.bind(y()(t)),t.debouncedOnSearch=Object(S.debounce)(t.onSearch.bind(y()(t)),400),t}return m()(r,e),f()(r,[{key:"componentDidMount",value:function(){var t=this,e=this.props.selected;C({selected:e}).then((function(e){t.setState({list:e,loading:!1})})).catch(this.setError)}},{key:"componentWillUnmount",value:function(){this.debouncedOnSearch.cancel()}},{key:"onSearch",value:function(t){var e=this,r=this.props.selected;C({selected:r,search:t}).then((function(t){e.setState({list:t,loading:!1})})).catch(this.setError)}},{key:"setError",value:function(t){var e;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(Object(L.a)(t));case 2:e=r.sent,this.setState({list:[],loading:!1,error:e});case 4:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){var e=this,r=this.state,n=r.error,c=r.list,i=r.loading;return React.createElement(t,o()({},this.props,{error:n,products:c,isLoading:i,onSearch:P.d?function(t){e.setState({loading:!0}),e.debouncedOnSearch(t)}:null}))}}]),r}(j.Component);return e.defaultProps={selected:[]},e}),"withSearchedProducts"),Object(w.createHigherOrderComponent)((function(t){var e=function(e){function r(){return l()(this,r),b()(this,h()(r).apply(this,arguments))}return m()(r,e),f()(r,[{key:"render",value:function(){var e=this.props.selected;return React.createElement(t,o()({},this.props,{selected:Object(S.isNil)(e)?[]:[e]}))}}]),r}(j.Component);return e.defaultProps={selected:null},e}),"withTransformSingleSelectToMultipleSelect");var U=r(3),V=r(19),Y=r(20),Q=function(t){return function(e){var r;return r=Object(j.useRef)(Object(U.getSetting)("restApiRoutes")),Object(Y.useSelect)((function(t,e){if(r.current){var n=t(V.SCHEMA_STORE_KEY),o=n.isResolving,c=n.hasFinishedResolution,i=e.dispatch(V.SCHEMA_STORE_KEY),a=i.receiveRoutes,u=i.startResolution,s=i.finishResolution;Object.keys(r.current).forEach((function(t){var e=r.current[t];o("getRoutes",[t])||c("getRoutes",[t])||(u("getRoutes",[t]),a(e,[t]),s("getRoutes",[t]))}))}}),[]),React.createElement(t,e)}};r.d(e,"a",(function(){return Q}))},,function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e,r){"use strict";var n=r(36);function o(){}function c(){}c.resetWarningCache=o,t.exports=function(){function t(t,e,r,o,c,i){if(i!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:c,resetWarningCache:o};return r.PropTypes=r,r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,o=!1,c=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,c=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw c}}return r}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,,function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return i}));var n=r(5),o=n.a.reduce((function(t,e){var r,n=(r=e)&&r.attribute_name?{id:parseInt(r.attribute_id,10),name:r.attribute_name,taxonomy:"pa_"+r.attribute_name,label:r.attribute_label}:null;return n.id&&t.push(n),t}),[]),c=function(t){if(t)return o.find((function(e){return e.id===t}))},i=function(t){if(t)return o.find((function(e){return e.taxonomy===t}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return c}));var n=r(15),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=t.filter((function(t){return t.attribute===r.taxonomy})),i=c.length?c[0]:null;if(i&&i.slug&&Array.isArray(i.slug)&&i.slug.includes(o)){var a=i.slug.filter((function(t){return t!==o})),u=t.filter((function(t){return t.attribute!==r.taxonomy}));a.length>0&&(i.slug=a.sort(),u.push(i)),e(Object(n.sortBy)(u,"attribute"))}},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"in",i=t.filter((function(t){return t.attribute!==r.taxonomy}));0===o.length?e(i):(i.push({attribute:r.taxonomy,operator:c,slug:Object(n.map)(o,"slug").sort()}),e(Object(n.sortBy)(i,"attribute")))}},,,,,,,,,,,,,,,,,,,function(t,e){},,,,function(t,e,r){"use strict";r.r(e);var n=r(32),o=r(14),c=r.n(o),i=r(2),a=r(24),u=r(0),s=r(21),l=r.n(s),p=(r(16),r(66),r(46)),f=(r(17),r(30)),d=function(t,e){return Number.isFinite(t)&&Number.isFinite(e)?Object(i.sprintf)(Object(i.__)("Between %s and %s","woo-gutenberg-products-block"),Object(f.a)(t),Object(f.a)(e)):Number.isFinite(t)?Object(i.sprintf)(Object(i.__)("From %s","woo-gutenberg-products-block"),Object(f.a)(t)):Object(i.sprintf)(Object(i.__)("Up to %s","woo-gutenberg-products-block"),Object(f.a)(e))},b=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return React.createElement("li",{className:"wc-block-active-filters-list-item",key:t+":"+e},React.createElement("span",{className:"wc-block-active-filters-list-item__type"},t+": "),React.createElement("strong",{className:"wc-block-active-filters-list-item__name"},e),React.createElement("button",{onClick:r},Object(i.__)("Remove","woo-gutenberg-products-block")))},g=r(47),h=function(t){var e=t.attributeObject,r=void 0===e?{}:e,n=t.slugs,o=void 0===n?[]:n,i=Object(a.a)({namespace:"/wc/store",resourceName:"products/attributes/terms",resourceValues:[r.id]}),u=i.results,s=i.isLoading,l=Object(a.e)("attributes",[]),p=c()(l,2),f=p[0],d=p[1];if(s)return null;var h=r.label;return o.map((function(t){var e=u.find((function(e){return e.slug===t}));return e&&b(h,e.name||t,(function(){Object(g.a)(f,d,r,t)}))}))},v=function(t){var e=t.attributes,r=t.isEditor,n=void 0!==r&&r,o=Object(a.e)("attributes",[]),s=c()(o,2),f=s[0],g=s[1],v=Object(a.e)("min_price"),y=c()(v,2),O=y[0],m=y[1],j=Object(a.e)("max_price"),w=c()(j,2),S=w[0],_=w[1],E=Object(u.useMemo)((function(){return Number.isFinite(O)||Number.isFinite(S)?b(Object(i.__)("Price:","woo-gutenberg-products-block"),d(O,S),(function(){m(null),_(null)})):null}),[O,S,d]),x=Object(u.useMemo)((function(){return f.map((function(t){var e=Object(p.b)(t.attribute);return React.createElement(h,{attributeObject:e,slugs:t.slug,key:t.attribute})}))}),[f]);if(!(f.length>0||Number.isFinite(O)||Number.isFinite(S)||n))return null;var P="h".concat(e.headingLevel),k=l()("wc-block-active-filters-list",{"wc-block-active-filters-list--chips":"chips"===e.displayStyle});return React.createElement(u.Fragment,null,!n&&e.heading&&React.createElement(P,null,e.heading),React.createElement("div",{className:"wc-block-active-filters"},React.createElement("ul",{className:k},n?React.createElement(u.Fragment,null,b(Object(i.__)("Size","woo-gutenberg-products-block"),Object(i.__)("Small","woo-gutenberg-products-block")),b(Object(i.__)("Color","woo-gutenberg-products-block"),Object(i.__)("Blue","woo-gutenberg-products-block"))):React.createElement(u.Fragment,null,E,x)),React.createElement("button",{className:"wc-block-active-filters__clear-all",onClick:function(){m(null),_(null),g([])}},Object(i.__)("Clear All","woo-gutenberg-products-block"))))},y=r(28);Object(y.a)(".wp-block-woocommerce-active-filters",Object(n.a)(v),(function(t){return{attributes:{displayStyle:t.dataset.displayStyle,heading:t.dataset.heading,headingLevel:t.dataset.headingLevel||3}}}))}]);